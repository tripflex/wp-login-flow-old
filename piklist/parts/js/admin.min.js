(function(e,d,c,f){e(c).ready(function(){e("body").wptabs();b.init()});var b={init:function(){b.meta_boxes();b.post_name();b.post_submit_meta_box();b.thickbox();b.user_forms();b.empty_elements();b.list_tables();b.widgets_init()},empty_elements:function(){e("#post-body-content").each(function(){if(e.trim(e(this).html())==""){e(this).html("")}})},user_forms:function(){if("WebkitAppearance" in c.documentElement.style){setTimeout(function(){e("input:-webkit-autofill").each(function(){var g=e(this).attr("name");e(this).after(this.outerHTML).remove();e("input[name="+g+"]").val("")})},250)}},thickbox:function(){e(c).on("click",".piklist-list-table-export-button",function(){setTimeout(function(){var g=870,h=800;e("#TB_window").css({marginLeft:"-"+parseInt((g/2),10)+"px",width:g+"px",height:h+"px",marginTop:"-"+parseInt((h/2),10)+"px"});e("#TB_ajaxContent").css({height:h-45+"px"})},100)})},meta_boxes:function(){e(".piklist-meta-box-collapse:not(.piklist-meta-box-lock)").addClass("closed");e(".piklist-meta-box-lock").addClass("stuffbox").css("box-shadow","none").find("div.handlediv").removeClass("handlediv").hide().next("h3.hndle").removeClass("hndle").css("cursor","default");e(".piklist-meta-box-lock").show();e(".piklist-meta-box > .inside").each(function(){if(e(this).find(" > *:first-child").hasClass("piklist-field-container")){e(this).css({"margin-top":"0"})}})},post_name:function(){var h=e("body.wp-admin.post-php form#post:first");if(h.length>0){var g=h.find(":input#post_name");if(g.length<=0){h.append(e('<input type="hidden" name="post_name" id="post_name">'))}}},post_submit_meta_box:function(){e(".save-post-status","#post-status-select").click(function(h){h.preventDefault();var g=e("#post_status").val(),i=e("#post_status option:selected").text();if(g!="draft"){e("#save-post").val("Save");e("#hidden_post_status, #original_publish").val(i);e("#publish").val("Update")}e("#post-status-display").text(i)});e("#publish","#major-publishing-actions").click(function(){if(e("#post-status-select").css("display")!="none"){e(".save-post-status","#post-status-select").trigger("click")}if(e("#post-visibility-select").css("display")!="none"){e(".save-post-visibility","#post-visibility-select").trigger("click")}})},widgets_init:function(){e(c).on("mousedown",'.widget input[name="savewidget"]',function(){var g=e(this),h=g.parents(".widget-control-actions:first").siblings(".widget-content:first");e(".piklist-universal-widget-form-container").on("remove",function(){h.css({height:h.outerHeight(),overflow:"hidden"});h.removeData("wptabs").removeData("piklistgroups").removeData("piklistcolumns").removeData("piklistmediaupload").removeData("piklistaddmore").removeData("piklistfields");setTimeout(function(){h.find(".piklist-universal-widget-form-container").wptabs().piklistgroups().piklistcolumns().piklistmediaupload().piklistaddmore({sortable:true}).piklistfields();h.css({height:"auto",overflow:"visible"})},50)})});e(".piklist-universal-widget-form-container").each(function(){var j=e(this).parents(".widget-content"),h=e(this).parents(".widget").find(".widget-title h4"),k=e(this).attr("data-widget-title"),g=e(this).attr("data-widget-height"),i=e(this).attr("data-widget-width");if(typeof k!="undefined"){h.find(".in-widget-title").text(":  "+k)}b.widget_dimensions(j,g,i)});e(c).on("change",".piklist-universal-widget-select",function(){var k=e(this).val(),m=e(this).attr("data-piklist-addon"),h=("piklist-universal-widget-"+m).replace(/-/g,"_"),l=e(this).parents(".widget-content"),n=e(this).attr("class").split(" "),p=l.find(".piklist-universal-widget-form-container"),j=e(this).attr("name").split("[")[1].replace(/\]/g,""),g=e(this).parents(".widget").find(".widget-title h4"),i=l.find(".piklist-universal-widget-select-container p"),o=l.attr("data-piklist-wptab-active");if(k){p.hide().empty();e.ajax({type:"POST",url:ajaxurl,async:false,data:{action:h,widget:k,number:j},success:function(q){q=e.parseJSON(q);g.find(".in-widget-title").text(":  "+q.widget.data.title);i.text(q.widget.data.description);p.removeData("wptabs").removeData("piklistgroups").removeData("piklistcolumns").removeData("piklistmediaupload").removeData("piklistaddmore").removeData("piklistfields");p.html(q.form).wptabs().piklistgroups().piklistcolumns().piklistmediaupload().piklistaddmore({sortable:true}).piklistfields();l.find(".wp-tab-bar > li").removeClass("wp-tab-active");l.find(".wp-tab-bar > li:first").addClass("wp-tab-active");if(l.find(".wp-tab-bar").length>0&&typeof o!="undefined"){l.find(".wp-tab-bar > li").removeClass("wp-tab-active").get(2).addClass("wp-tab-active")}b.widget_dimensions(l,q.widget.form_data.height,q.widget.form_data.width)}})}});e(".wp-tab-bar li a").on("click",function(h){var g=e(this).parents(".widget-content:first");if(g.length>0){g.attr("data-piklist-wptab-active",e(this).text())}})},widget_dimensions:function(l,i,k){var j=l.parents(".widget:first"),h=j.find(".widget-inside"),g=j.find(".widget-action:first"),m=false;if(h.is(":visible")){g.trigger("click");m=true}l.siblings('input[name="widget-width"]').val(k?k:250);l.siblings('input[name="widget-height"]').val(i?i:200);setTimeout(function(){l.find(".piklist-universal-widget-form-container").show();if(m){g.trigger("click")}},250)},list_tables:function(){e(".piklist-list-table-export-columns").sortable().disableSelection();e(c).on("click",".piklist-list-table-export-submit",function(h){var g=e(this).attr("rel");tb_remove();e("#"+g).submit()})}};var a=function(h,g){this.$element=e(h);this._init()};a.prototype={constructor:a,_init:function(){this.setup();e(c).on("click",".wp-tab-bar li a",function(l){l.preventDefault();var k=e(this).closest("li"),h=e(this).closest(".wp-tab-bar").children().index(k),g=e(this).closest(".wp-tab-bar").nextUntil(".wp-tab-bar",".wp-tab-panel");k.addClass("wp-tab-active").siblings().removeClass("wp-tab-active");for(var j=0;j<g.length;j++){e(g[j]).toggle(j==h?true:false)}})},setup:function(){e(".wp-tab-bar li a").each(function(){var h=e(this).closest("li");if(!h.hasClass("wp-tab-active")){var g=e(this).closest(".wp-tab-bar").children().index(h);e(this).closest(".wp-tab-bar").nextUntil(".wp-tab-bar",".wp-tab-panel").eq(g).hide()}})}};e.fn.wptabs=function(g){var h=Array.apply(null,arguments);h.shift();return this.each(function(){var k=e(this),j=k.data("wptabs"),i=typeof g==="object"&&g;if(!j){k.data("wptabs",(j=new a(this,e.extend({},e.fn.wptabs.defaults,i,e(this).data()))))}if(typeof g==="string"){j[g].apply(j,h)}})};e.fn.wptabs.defaults={};e.fn.wptabs.Constructor=a})(jQuery,window,document);